generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

enum RouteType {
  ONEWAY
  ROUNDTRIP
  MULTIWAY
}

enum FlightType {
  ECONOMY
  PREMIUM_ECONOMY
  BUSINESS
  FIRST
}

model Flight {
  id            String     @id @map("_id")
  type          RouteType
  from          String
  to            String
  airline       String
  departureDate DateTime
  flightClass   FlightType
  passengers    Json[]
}

model CoTraveler {
  id          String @id @map("_id")
  name        String
  dob         String
  email       String
  passportNo  String
  phoneNumber String
}

//user model
// api /auth/sign-up /auth/login
// /user-profile update api 
model User {
  id            String  @id @default(uuid()) @map("_id")
  firstname     String
  lastname      String
  mobileNumber  String?
  email         String  @unique
  address       String?
  dob           String?
  passportNo    String?
  lastBooking   String?
  country       String?
  gender        String?
  pincode       String?
  avatarSrc     String?
  passportImage String?
  password      String?
  cotraveler    Json[]
}

enum AirlineFeeType {
  PERCENT
  FIXED
}

model AirlineCommision {
  id             String         @id @map("_id")
  type           String
  commisionTitle String
  supplier       String
  commissionFees String
  feeType        AirlineFeeType
}

enum TicketStatus {
  OPEN
  PENDING
  RESOLVE
}

model Ticket {
  id            String       @id @map("_id")
  subject       String
  requesterName String
  requestedOn   DateTime
  status        TicketStatus
  images        String[]
}

model Booking {
  id             String @id @map("_id")
  contactDetail  Json // email and phone number
  flightDetails  Json[]
  payment        String // Payment id
  passenger      Json[] // passenger[] id reference
  address        Json
  baseFare       Json[]
  tax_fee_surges Json[]
  otherCharges   Json[]
  discount       Json
  totalAmount    String
  currency       String
}

model Payment {
  id          String   @id @map("_id")
  amount      Float
  currency    String
  paymentType String
  status      String
  paymentDate DateTime
}

model passenger {
  id          String @id @map("_id")
  name        String
  dob         String
  email       String
  passportNo  String
  phoneNumber String
}
